# 光通信モールス信号受信デバイス 設計書

## 1. 概要
光の点滅によるモールス信号を受光素子で受け取り、解読した文字をLCD1602キャラクタデバイスに表示するデバイスを作成する。

## 2. システム構成
- **入力**: 光信号 (短点・長点)
- **処理**: Arduinoによる電圧計測、時間計測、モールス符号の復号
- **出力**: LCD1602ディスプレイへの文字表示

## 3. ハードウェア設計

### 3.1 必要な部品
1.  **Arduinoボード** (Uno R3)
2.  **受光素子**: 
    - フォトトランジスタ (例: NJL7502L) または CdSセル
    - 抵抗 (10kΩ程度)
3.  **表示デバイス**:
    - **LCD1602 (16ピン)**
    - 抵抗 (コントラスト調整用)
4.  **その他**:
    - ジャンパワイヤ、ブレッドボード
    - **タクトスイッチ** (クリア用: Pin 8とGNDに接続)

### 3.2 回路設計

![回路図](回路図.png)

## 4. ソフトウェア設計

### 4.1 機能要件
1.  **閾値判定**: アナログ入力値がある閾値を超えたら**ON**、下回ったら**OFF**と判定する。
2.  **時間計測**: ONの状態が続いた時間、OFFの状態が続いた時間をms単位で計測する。
3.  **信号判定**:
    - **短点 (Dot)**: ON時間が短い (例: < 200ms)
    - **長点 (Dash)**: ON時間が長い (例: > 200ms)
    - **文字区切り**: OFF時間が一定以上 (例: > 400ms) で1文字確定
    - **単語区切り**: OFF時間がさらに長い (例: > 1000ms) でスペース挿入
4.  **デコード**: 記録した短点・長点の組み合わせを「A-Z, 0-9」等の文字に変換する。
5.  **表示**: 確定した文字をLCD1602に順次表示する。画面がいっぱいになったらスクロール等の処理を行う。
6.  **クリア機能**: タクトスイッチ押下またはシリアルコマンド('c')で、受信バッファと表示をクリアする。

### 4.2 フローチャート

![フローチャート](フローチャート.png)